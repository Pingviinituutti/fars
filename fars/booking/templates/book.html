{% extends "modalcontent.html" %}
{% block title %}
Booking {{ bookable }}
{% endblock %}
{% block body %}
<form id="bookform">
  {% csrf_token %}
  <table>
    {{form.as_table}}
  </table>
</form>
<script type="text/javascript">
  $('#bookform').submit(function(event) {
    $.post("{{url}}", $(this).serialize())
      .done(function() {
        $('#calendar').fullCalendar('refetchEvents');
        $('#modalBox').modal('hide')
      }).fail(function(data){
        $('#modalBox').find('.modal-body').html(data.responseText);
      });
    event.preventDefault();
  });
</script>
{% endblock %}
{% block footer %}
<input class="btn btn-success" type="submit" value="Submit" form="bookform">
{% endblock %}